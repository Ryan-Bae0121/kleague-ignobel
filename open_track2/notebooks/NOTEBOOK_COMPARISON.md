# 노트북 비교 분석 (00~06)

## 📋 노트북 개요

| 노트북 | 주요 목적 | 핵심 기능 |
|--------|----------|---------|
| **00_data_overview** | 데이터 기본 확인 | 데이터 로딩, 구조 확인, 품질 검증 |
| **01_pitch_utils_and_zones** | 피치 플롯 및 존 검증 | 피치 그리기, 존 할당 검증 |
| **02_team_offense_analysis** | 팀별 공격 패턴 분석 | 공격 관점 zone별 성공률 분석 |
| **03_team_defense_analysis** | 팀별 수비 패턴 분석 | 수비 관점 zone별 성공률 분석 |
| **04_pattern_comparison_and_story** | 팀 간 패턴 비교 | 다중 팀 zone 프로필 비교 |
| **05_team_case_studies** | 특정 팀 심층 분석 | 선택 팀의 공격/수비 히트맵 분석 |
| **06_win_probability_simulator** | 승리확률 예측 및 전술 시뮬레이션 | ML 모델 학습, 전술 레버 시뮬레이션 |

---

## 🔄 겹치는 부분 (공통 기능)

### 1. 데이터 로딩 및 전처리
**모든 노트북 (00~06)**
- `load_raw_events()`: 이벤트 데이터 로딩
- `load_match_info()`: 경기 정보 로딩
- `add_zone_columns()`: 존 컬럼 추가
- 기본 데이터 전처리

### 2. Zone 할당 및 분석
**01, 02, 03, 04, 05**
- `add_zone_columns()`: 이벤트에 zone 할당
- Zone 기반 분석 (D-L, D-C, D-R, DM-L, DM-C, DM-R, AM-L, AM-C, AM-R, A-L, A-C, A-R)

### 3. Zone별 성공률 계산
**02, 03, 04**
- `compute_zone_success_rate()`: Zone별 패스/슛 성공률 계산
- 공격/수비 관점에서 성공률 분석

### 4. 팀 프로필 계산
**02, 03, 04**
- `compute_team_zone_profile()`: 팀별 zone 프로필 계산
- Zone별 이벤트 분포 분석

### 5. 공격/수비 이벤트 필터링
**02, 03, 05**
- `filter_team_vs_opponent()`: 팀 vs 상대팀 이벤트 필터링
- 공격 관점 / 수비 관점 데이터 분리

### 6. 시각화
**02, 03, 04, 05**
- Zone별 성공률 막대 그래프
- 히트맵 시각화
- 피치 플롯

### 7. 팀 이름 매핑
**02, 03, 04, 05**
- 한글 팀명 → 영문 팀명 매핑
- 시각화용 영문 이름 사용

---

## ✨ 고유한 부분 (각 노트북만의 기능)

### 00_data_overview
**고유 기능:**
- ✅ 데이터 구조 기본 확인
- ✅ 좌표 범위 검증 (0-100)
- ✅ 이벤트 타입 분포 확인
- ✅ 데이터 품질 이슈 식별
- ✅ 기본 통계 요약

**사용 함수:**
- `load_raw_events()`
- `load_match_info()`
- `add_zone_columns()`

---

### 01_pitch_utils_and_zones
**고유 기능:**
- ✅ 피치 그리기 함수 검증 (`draw_pitch()`)
- ✅ Zone 시각화 검증 (`add_zones_to_ax()`)
- ✅ 이벤트 스캐터 플롯 검증 (`plot_events_scatter()`)
- ✅ Zone 할당 정확도 검증

**사용 함수:**
- `draw_pitch()`
- `add_zones_to_ax()`
- `plot_events_scatter()`
- `add_zone_columns()`

---

### 02_team_offense_analysis
**고유 기능:**
- ✅ **공격 관점** 분석 (팀이 공격할 때)
- ✅ Zone별 패스 성공률 분석
- ✅ Zone별 슛 성공률 분석
- ✅ 공격 패턴 시각화 (막대 그래프)
- ✅ 특정 팀 선택 분석

**사용 함수:**
- `filter_team_vs_opponent()` (공격 관점)
- `compute_zone_success_rate()` (공격 이벤트)
- `compute_team_zone_profile()` (공격 프로필)

**고유 분석:**
- 공격 zone별 성공률
- 공격 패턴 식별

---

### 03_team_defense_analysis
**고유 기능:**
- ✅ **수비 관점** 분석 (상대가 공격할 때)
- ✅ Zone별 상대 공격 성공률 분석
- ✅ 수비 약점 zone 식별
- ✅ 수비 패턴 시각화 (막대 그래프)
- ✅ 특정 팀 선택 분석

**사용 함수:**
- `filter_team_vs_opponent()` (수비 관점)
- `compute_zone_success_rate()` (수비 이벤트)
- `compute_team_zone_profile()` (수비 프로필)

**고유 분석:**
- 수비 zone별 성공률
- 수비 약점 식별

---

### 04_pattern_comparison_and_story
**고유 기능:**
- ✅ **다중 팀 비교** 분석
- ✅ 팀 간 zone 프로필 비교 히트맵
- ✅ 팀 간 강점/약점 비교
- ✅ 팀 스토리 생성
- ✅ 전체 리그 패턴 분석

**사용 함수:**
- `compute_team_zone_profile()` (다중 팀)
- `compute_zone_success_rate()` (다중 팀)
- 히트맵 시각화 (팀 x Zone)

**고유 분석:**
- 팀 간 패턴 비교
- 리그 전체 패턴 분석

---

### 05_team_case_studies
**고유 기능:**
- ✅ **특정 팀 심층 분석** (2-3개 팀)
- ✅ 공격 이벤트 밀도 히트맵 (KDE)
- ✅ 슛 위치 밀도 히트맵
- ✅ 수비 관점 상대 공격 히트맵
- ✅ 텍스트 인사이트 생성
- ✅ 종합 케이스 스터디 리포트

**사용 함수:**
- `add_opponent_columns()`
- `summarize_team_case_study()`
- `generate_text_insights()`
- `simple_kde_heatmap()` (KDE 히트맵)
- `plot_team_offense_heatmaps()`
- `plot_team_defense_heatmaps()`

**고유 분석:**
- KDE 기반 밀도 히트맵
- 종합 케이스 스터디
- 텍스트 인사이트 생성

---

### 06_win_probability_simulator
**고유 기능:**
- ✅ **승리확률 예측 모델** (Logistic Regression, LightGBM)
- ✅ **전술 레버 시뮬레이션** (What-if 분석)
- ✅ 팀 × 경기 피처 테이블 생성
- ✅ 매치업 피처 계산 (최근 폼 + 상대팀 비교)
- ✅ 팀 강점/약점 분석 리포트
- ✅ 전술 레버 효과 시뮬레이션

**사용 함수:**
- `build_team_match_features()`: 팀×경기 피처 생성
- `build_matchup_features()`: 매치업 피처 생성
- `train_model()`: 모델 학습
- `predict_win_probability()`: 승리확률 예측
- `analyze_team_strengths()`: 팀 강점 분석
- `analyze_opponent_weaknesses()`: 상대팀 약점 분석
- `simulate_tactical_levers()`: 전술 레버 시뮬레이션

**고유 분석:**
- 머신러닝 모델 기반 예측
- 전술 레버 시뮬레이션
- 매치업 분석

---

## 📊 분석 관점 비교

| 관점 | 02 | 03 | 04 | 05 | 06 |
|------|----|----|----|----|----|
| **공격 분석** | ✅ | ❌ | ✅ | ✅ | ❌ |
| **수비 분석** | ❌ | ✅ | ✅ | ✅ | ❌ |
| **팀 비교** | ❌ | ❌ | ✅ | ❌ | ❌ |
| **심층 분석** | ❌ | ❌ | ❌ | ✅ | ❌ |
| **예측 모델** | ❌ | ❌ | ❌ | ❌ | ✅ |
| **전술 시뮬레이션** | ❌ | ❌ | ❌ | ❌ | ✅ |

---

## 🔗 노트북 간 의존성

```
00_data_overview
    ↓
01_pitch_utils_and_zones
    ↓
02_team_offense_analysis ──┐
    ↓                       │
03_team_defense_analysis ───┼──→ 04_pattern_comparison_and_story
    ↓                       │
05_team_case_studies ───────┘
    ↓
06_win_probability_simulator (독립적)
```

**의존성 설명:**
- **00, 01**: 기초 데이터 및 유틸리티 검증
- **02, 03**: 공격/수비 분석 (병렬)
- **04**: 02, 03의 결과를 활용한 비교 분석
- **05**: 02, 03의 방법론을 활용한 심층 분석
- **06**: 독립적인 ML 기반 예측 시스템

---

## 💡 사용 가이드

### 기본 분석 흐름
1. **00**: 데이터 확인
2. **01**: 피치/존 유틸리티 검증
3. **02 또는 03**: 공격 또는 수비 분석
4. **04**: 팀 간 비교
5. **05**: 특정 팀 심층 분석

### 예측 및 시뮬레이션
- **06**: 승리확률 예측 및 전술 시뮬레이션 (독립 실행 가능)

---

## 🎯 요약

### 겹치는 부분
- 데이터 로딩 및 전처리
- Zone 할당 및 분석
- Zone별 성공률 계산
- 팀 프로필 계산
- 시각화

### 고유한 부분
- **00**: 데이터 기본 확인
- **01**: 피치 플롯 검증
- **02**: 공격 관점 분석
- **03**: 수비 관점 분석
- **04**: 팀 간 비교
- **05**: 심층 케이스 스터디 (KDE 히트맵)
- **06**: ML 기반 예측 및 전술 시뮬레이션

---

## 🔍 team_analystic.ipynb vs 00~06 노트북 비교

### team_analystic.ipynb (동료 작업) 개요
**주요 분석 내용:**
1. ✅ **팀별 패스 성공률** - 전체 팀의 패스 성공률(%) 및 총 패스 수
2. ✅ **팀별 슈팅 효율성** - 슈팅 성공률(%), 유효슈팅 비율(%)
3. ✅ **공격/수비 스타일** - 경기당 공격 액션 수, 경기당 수비 액션 수
4. ✅ **홈/어웨이 승점** - 홈 승점, 원정 승점, 총 승점

**분석 방법:**
- 전체 팀 통계 (리그 전체 비교)
- 단순 집계 (groupby, mean, sum)
- 기본 시각화 (막대 그래프, 스캐터 플롯)

---

### 🔄 겹치는 부분

#### 1. 팀별 패스/슈팅 성공률 분석
**team_analystic.ipynb:**
- 전체 팀의 패스 성공률 계산
- 전체 팀의 슈팅 성공률 계산

**00~06 노트북:**
- **02_team_offense_analysis**: Zone별 패스/슛 성공률 (공격 관점)
- **03_team_defense_analysis**: Zone별 패스/슛 성공률 (수비 관점)
- **04_pattern_comparison_and_story**: 팀 간 패턴 비교

**겹침 정도:** ⚠️ **부분적 겹침**
- **team_analystic**: 전체 팀의 **전체** 패스/슈팅 성공률
- **02/03**: 특정 팀의 **Zone별** 패스/슈팅 성공률
- **04**: 팀 간 **Zone 프로필** 비교

**차이점:**
- team_analystic: 전체 통계, Zone 구분 없음
- 02/03/04: Zone 기반 세부 분석

#### 2. 공격/수비 스타일 분석
**team_analystic.ipynb:**
- 경기당 공격 액션 수 (Pass, Cross, Shot, Take-On, Carry)
- 경기당 수비 액션 수 (Tackle, Interception, Clearance, Block)

**00~06 노트북:**
- **02_team_offense_analysis**: 공격 관점 Zone별 성공률
- **03_team_defense_analysis**: 수비 관점 Zone별 성공률
- **05_team_case_studies**: 공격/수비 히트맵 분석

**겹침 정도:** ⚠️ **부분적 겹침**
- **team_analystic**: 전체 팀의 **액션 수** 집계
- **02/03/05**: 특정 팀의 **Zone별 성공률/패턴** 분석

**차이점:**
- team_analystic: 액션 수만 집계 (성공률 없음)
- 02/03/05: Zone별 성공률 및 패턴 분석

#### 3. 팀 간 비교
**team_analystic.ipynb:**
- 전체 팀의 통계를 한 번에 비교 (패스 성공률, 슈팅 효율성, 공격/수비 스타일)

**00~06 노트북:**
- **04_pattern_comparison_and_story**: 팀 간 Zone 프로필 비교 (히트맵)

**겹침 정도:** ⚠️ **부분적 겹침**
- **team_analystic**: 전체 팀의 **기본 통계** 비교
- **04**: 팀 간 **Zone 프로필** 비교

**차이점:**
- team_analystic: 단순 통계 비교
- 04: Zone 기반 패턴 비교

---

### ✨ 고유한 부분 (겹치지 않음)

#### team_analystic.ipynb만의 고유 기능
1. ✅ **홈/어웨이 승점 분석**
   - 홈 경기 승점 vs 원정 경기 승점
   - 00~06 노트북에는 없음

2. ✅ **전체 팀 기본 통계 요약**
   - 리그 전체 팀의 기본 통계를 한 번에 확인
   - 00~06은 Zone 기반 세부 분석에 집중

3. ✅ **경기당 액션 수 정규화**
   - 경기당 평균으로 정규화한 공격/수비 액션 수
   - 00~06은 Zone별 성공률에 집중

#### 00~06 노트북만의 고유 기능
1. ✅ **Zone 기반 분석** (01~05)
   - 12개 Zone (D-L, D-C, D-R, DM-L, DM-C, DM-R, AM-L, AM-C, AM-R, A-L, A-C, A-R)
   - team_analystic에는 Zone 개념 없음

2. ✅ **공격/수비 관점 분리** (02, 03)
   - 팀이 공격할 때 vs 상대가 공격할 때
   - team_analystic은 전체 통계만 집계

3. ✅ **피치 플롯 시각화** (01, 05)
   - 실제 피치 위에 이벤트 시각화
   - team_analystic은 막대 그래프, 스캐터 플롯만 사용

4. ✅ **KDE 히트맵** (05)
   - 밀도 기반 히트맵
   - team_analystic에는 없음

5. ✅ **ML 기반 예측** (06)
   - 승리확률 예측 모델
   - 전술 레버 시뮬레이션
   - team_analystic에는 없음

---

## 📊 비교 요약표

| 분석 항목 | team_analystic | 00~06 노트북 | 겹침 여부 |
|----------|----------------|--------------|----------|
| **패스 성공률** | 전체 팀 전체 통계 | Zone별 성공률 | ⚠️ 부분적 |
| **슈팅 효율성** | 전체 팀 전체 통계 | Zone별 성공률 | ⚠️ 부분적 |
| **공격 스타일** | 액션 수 집계 | Zone별 성공률/패턴 | ⚠️ 부분적 |
| **수비 스타일** | 액션 수 집계 | Zone별 성공률/패턴 | ⚠️ 부분적 |
| **팀 간 비교** | 기본 통계 비교 | Zone 프로필 비교 | ⚠️ 부분적 |
| **홈/어웨이 승점** | ✅ 있음 | ❌ 없음 | ❌ 안 겹침 |
| **Zone 기반 분석** | ❌ 없음 | ✅ 있음 | ❌ 안 겹침 |
| **공격/수비 관점 분리** | ❌ 없음 | ✅ 있음 | ❌ 안 겹침 |
| **피치 플롯** | ❌ 없음 | ✅ 있음 | ❌ 안 겹침 |
| **KDE 히트맵** | ❌ 없음 | ✅ 있음 | ❌ 안 겹침 |
| **ML 예측** | ❌ 없음 | ✅ 있음 | ❌ 안 겹침 |

---

## 💡 결론

### 겹치는 부분
- ⚠️ **부분적 겹침**: 패스/슈팅 성공률, 공격/수비 스타일, 팀 간 비교
- 하지만 **분석 방법과 깊이**가 다름:
  - **team_analystic**: 전체 팀의 전체 통계 (단순 집계)
  - **00~06**: Zone 기반 세부 분석 (공간적 분석)

### 안 겹치는 부분
- **team_analystic만**: 홈/어웨이 승점 분석
- **00~06만**: Zone 기반 분석, 공격/수비 관점 분리, 피치 플롯, KDE 히트맵, ML 예측

### 추천
- **team_analystic**: 리그 전체 팀의 기본 통계를 빠르게 확인할 때
- **00~06**: Zone 기반 세부 분석, 공간적 패턴 분석, ML 예측이 필요할 때
- **상호 보완적**: team_analystic의 전체 통계 + 00~06의 세부 분석 = 완전한 분석

