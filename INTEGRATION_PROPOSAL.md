# 🎯 K League 이그노벨상 Streamlit 앱 - Notebooks 통합 제안서

## 📋 현재 상태

### 기존 Streamlit 앱 기능
- ✅ 이그노벨상 시스템 (수비 9개 + 공격 7개 = 16개)
- ✅ 선수 프로필 및 검색
- ✅ 선수 비교 기능
- ✅ 팀별 성과 분석
- ✅ 다크 테마 매거진 스타일 UI

### 기존 Notebooks 분석 결과
- **00**: 데이터 기본 확인
- **01**: 피치 플롯 및 존 검증
- **02**: 팀별 공격 패턴 분석 (Zone 기반)
- **03**: 팀별 수비 패턴 분석 (Zone 기반)
- **04**: 팀 간 패턴 비교
- **05**: 특정 팀 심층 분석 (KDE 히트맵)
- **06**: 승리확률 예측 및 전술 시뮬레이션
- **team_analystic**: 홈/어웨이 승점 분석

---

## 🚀 통합 제안: 기능 확장 계획

### Phase 1: 핵심 분석 기능 통합 (우선순위 높음)

#### 1.1 **피치 기반 시각화 페이지** 📍
**기반**: `01_pitch_utils_and_zones.ipynb`

**추가 기능**:
- 새로운 페이지: `pages/5_📍_Pitch_Analysis.py`
- 피치 위에 이벤트 시각화
- Zone별 이벤트 분포 히트맵
- 선수별 주요 활동 영역 표시
- 상호작용 가능한 Plotly 피치 맵

**사용 사례**:
- "이 선수의 주요 활동 영역은?"
- "팀의 공격 패턴을 피치에서 확인"
- "이그노벨상 수상자의 활동 위치"

**기대 효과**:
- 공간적 분석 가능
- 시각적 스토리텔링 강화
- 일반 사용자도 이해하기 쉬운 UI

---

#### 1.2 **팀 공격/수비 패턴 분석 페이지** ⚽🛡️
**기반**: `02_team_offense_analysis.ipynb`, `03_team_defense_analysis.ipynb`

**추가 기능**:
- 새로운 페이지: `pages/6_⚽_Team_Patterns.py`
- 팀 선택 → 공격 패턴 vs 수비 패턴 분석
- Zone별 성공률 히트맵 (12개 Zone)
- 공격 관점: "우리 팀이 어디서 공격하는가?"
- 수비 관점: "우리 팀이 어디서 약한가?"

**시각화**:
- Zone별 패스/슛 성공률 막대 그래프
- 팀별 Zone 프로필 히트맵
- 리그 평균 vs 선택 팀 비교

**기대 효과**:
- 팀 분석 심화
- 이그노벨상과 연계한 패턴 분석
- 전술적 인사이트 제공

---

#### 1.3 **팀 간 비교 대시보드** 📊
**기반**: `04_pattern_comparison_and_story.ipynb`

**추가 기능**:
- 기존 `pages/3_🛡️_Teams.py` 확장
- 다중 팀 선택 비교 (최대 3-4팀)
- 팀별 Zone 프로필 비교 히트맵
- 자동 스토리 생성:
  - "A팀은 왼쪽 공격이 강하지만, B팀은 중앙 집중형"
  - "C팀의 수비 약점은 오른쪽 측면"

**시각화**:
- 팀 × Zone 히트맵 (12 Zone × N Teams)
- Radar 차트로 팀 프로필 비교
- 강점/약점 자동 하이라이트

**기대 효과**:
- 경기 전 상대팀 분석 도구
- 팀 스타일 비교 명확화

---

### Phase 2: 고급 분석 기능 (우선순위 중간)

#### 2.1 **팀 심층 분석 페이지** 🔍
**기반**: `05_team_case_studies.ipynb`

**추가 기능**:
- 새로운 페이지: `pages/7_🔍_Team_Deep_Dive.py`
- 선택 팀의 종합 리포트 생성
- KDE 기반 공격/수비 히트맵
- 슛 위치 밀도 분석
- 텍스트 인사이트 자동 생성

**리포트 구성**:
1. 공격 프로필
   - 공격 이벤트 밀도 히트맵
   - 슛 위치 히트맵
   - 주요 공격 루트
2. 수비 프로필
   - 상대 공격 허용 위치
   - 수비 취약 지점
   - 주요 수비 패턴
3. 이그노벨상 연계
   - "이 팀의 이그노벨상 수상자들은 주로 어디서 활동하는가?"
   - 패턴과 이그노벨 상관관계

**기대 효과**:
- 전문가급 분석 제공
- 매거진 스타일 리포트 생성

---

#### 2.2 **홈/어웨이 성과 분석** 🏠✈️
**기반**: `team_analystic.ipynb`

**추가 기능**:
- 기존 `pages/3_🛡️_Teams.py`에 추가 섹션
- 팀별 홈 경기 vs 어웨이 경기 성과 비교
- 홈/어웨이 승점 분포
- 홈/어웨이 이그노벨상 패턴 차이 분석

**시각화**:
- 홈/어웨이 성과 바이올린 플롯
- 팀별 홈 어드밴티지 지수
- "이 팀은 홈에서 더 많은 이그노벨상을 받는다"

**기대 효과**:
- 홈/어웨이 성과 차이 인사이트
- 이그노벨상 패턴 차이 발견

---

### Phase 3: 예측 및 시뮬레이션 (우선순위 낮음, 고급)

#### 3.1 **승리확률 예측 및 전술 시뮬레이터** 🎲
**기반**: `06_win_probability_simulator.ipynb`

**추가 기능**:
- 새로운 페이지: `pages/8_🎲_Match_Simulator.py`
- 경기 예측:
  - 두 팀 선택 → 승리확률 예측
  - 홈/어웨이, 최근 폼 반영
- 전술 시뮬레이션 (What-if):
  - "만약 이 선수를 교체하면?"
  - "만약 공격 포인트를 바꾸면?"
- 매치업 분석:
  - 상대팀 약점 vs 우리 팀 강점 매칭

**모델**:
- Logistic Regression
- LightGBM
- 모델 성능 표시

**주의사항**:
- 모델 학습 시간 고려
- 실시간 예측 vs 사전 계산 선택 필요

**기대 효과**:
- 경기 전 분석 도구
- 팬 참여도 증가 (예측 게임)
- 전술적 인사이트 제공

---

## 📐 UI/UX 통합 전략

### 페이지 구조 제안

```
현재:
├─ app.py (홈)
├─ pages/
│  ├─ 1_🏆_Awards.py
│  ├─ 2_👤_Players.py
│  ├─ 3_🛡️_Teams.py
│  └─ 4_📊_Methodology.py

추가 제안:
├─ pages/
│  ├─ 5_📍_Pitch_Analysis.py (NEW)
│  ├─ 6_⚽_Team_Patterns.py (NEW)
│  ├─ 7_🔍_Team_Deep_Dive.py (NEW)
│  └─ 8_🎲_Match_Simulator.py (NEW - 선택)
```

### 네비게이션 개선

**현재**: 사이드바 숨김 (collapsed)
**제안**: 
- 상단 탭 네비게이션 (카테고리별)
- 홈 / 선수 / 팀 / 분석 / 예측
- 드롭다운으로 세부 페이지 접근

### 데이터 통합 전략

**아티팩트 추가 생성**:
```
artifacts/
├─ awards_player.parquet (기존)
├─ leaderboard.parquet (기존)
├─ profiles.parquet (기존)
├─ awards_team.parquet (기존)
├─ team_zone_profiles.parquet (NEW)
├─ team_offense_patterns.parquet (NEW)
├─ team_defense_patterns.parquet (NEW)
├─ pitch_events.parquet (NEW - 선택)
└─ match_predictions.parquet (NEW - 선택)
```

**배치 스크립트 확장**:
- `scripts/build_artifacts.py` 확장
- 또는 `scripts/build_pattern_artifacts.py` 새로 생성

---

## 🎨 디자인 통합 전략

### 일관된 디자인 언어
- 기존 다크 테마 + 골드 악센트 유지
- 피치 시각화는 실제 피치 색상 (녹색)
- 히트맵은 기존 카드 스타일과 조화

### 인터랙티브 요소
- Plotly 기반 피치 맵 (줌, 팬 가능)
- 필터링: Zone 선택, 이벤트 타입 선택
- 애니메이션: 시간대별 패턴 변화 (선택)

---

## ⚡ 구현 우선순위

### 🔥 High Priority (즉시 구현 가능, 높은 가치)

1. **📍 피치 기반 시각화** (Phase 1.1)
   - 구현 난이도: ⭐⭐
   - 사용자 가치: ⭐⭐⭐⭐⭐
   - 개발 시간: 2-3일

2. **⚽ 팀 공격/수비 패턴 분석** (Phase 1.2)
   - 구현 난이도: ⭐⭐⭐
   - 사용자 가치: ⭐⭐⭐⭐
   - 개발 시간: 3-4일

3. **📊 팀 간 비교 확장** (Phase 1.3)
   - 구현 난이도: ⭐⭐
   - 사용자 가치: ⭐⭐⭐⭐
   - 개발 시간: 2일

### 🟡 Medium Priority (중기 구현)

4. **🔍 팀 심층 분석** (Phase 2.1)
   - 구현 난이도: ⭐⭐⭐⭐
   - 사용자 가치: ⭐⭐⭐⭐
   - 개발 시간: 4-5일

5. **🏠 홈/어웨이 분석** (Phase 2.2)
   - 구현 난이도: ⭐⭐
   - 사용자 가치: ⭐⭐⭐
   - 개발 시간: 1-2일

### 🟢 Low Priority (장기 구현, 선택적)

6. **🎲 승리확률 예측** (Phase 3.1)
   - 구현 난이도: ⭐⭐⭐⭐⭐
   - 사용자 가치: ⭐⭐⭐⭐⭐ (높지만 복잡)
   - 개발 시간: 5-7일
   - 주의: 모델 학습 시간, 실시간 vs 배치 처리 결정 필요

---

## 🔧 기술적 고려사항

### 성능 최적화
- 피치 히트맵: 대량 이벤트 처리 시 샘플링 필요
- Zone 프로필: 사전 계산하여 아티팩트로 저장
- 예측 모델: 사전 학습 후 로드 (실시간 학습 X)

### 데이터 의존성
- Zone 계산: `src/feature_engineering.py` 활용
- 피치 플롯: `src/pitch_plot.py` 활용
- 분석 유틸: `src/analysis_utils.py` 활용

### 확장성
- 모듈화된 구조 유지
- 새로운 분석 추가 시 독립적 구현 가능

---

## 📊 기대 효과

### 사용자 경험 향상
- ✅ 시각적 분석 강화 (피치 기반)
- ✅ 전문가급 인사이트 제공
- ✅ 이그노벨상과 패턴 분석 연계

### 차별화 포인트
- ✅ 단순 통계 → 공간적 패턴 분석
- ✅ 개별 분석 → 종합 리포트
- ✅ 과거 분석 → 미래 예측 (시뮬레이터)

### 실용성
- ✅ 경기 전 분석 도구로 활용 가능
- ✅ 전술 분석 및 상대팀 연구 도구
- ✅ 팬 커뮤니티 활성화 (예측, 토론)

---

## 🎯 최종 추천 구현 순서

### Week 1-2: 핵심 기능
1. 피치 기반 시각화 (5_📍_Pitch_Analysis.py)
2. 팀 공격/수비 패턴 분석 (6_⚽_Team_Patterns.py)

### Week 3: 비교 기능 강화
3. 팀 간 비교 확장 (3_🛡️_Teams.py 업그레이드)

### Week 4-5: 고급 분석
4. 팀 심층 분석 (7_🔍_Team_Deep_Dive.py)
5. 홈/어웨이 분석 (3_🛡️_Teams.py 추가 섹션)

### Optional: 예측 기능
6. 승리확률 예측 (8_🎲_Match_Simulator.py) - 필요 시 추가

---

## 💡 추가 아이디어

### 이그노벨상 연계 기능
- "이그노벨상 수상자들의 주요 활동 영역은?"
- "패턴 분석과 이그노벨 상관관계"
- "이 패턴 때문에 이그노벨상을 받았나?"

### 스토리텔링 강화
- 자동 리포트 생성 (GPT 스타일, 템플릿 기반)
- "이번 주 팀 리포트" 자동 생성
- 소셜 공유 기능 (이미지 생성)

### 커뮤니티 기능 (선택)
- 예측 게임 (팬들이 예측하고 점수 획득)
- 토론/댓글 기능 (각 분석 페이지)
- 즐겨찾기 팀 설정

---

## 📝 결론

현재 **이그노벨상 시스템**에 **공간적 패턴 분석**과 **예측 기능**을 추가하면:
- 단순 수상식 → **종합 분석 플랫폼**으로 진화
- 팬 서비스 → **전문 분석 도구**로 확장
- 데이터 스토리텔링 → **실전 전술 분석**으로 발전

**추천 시작점**: Phase 1 (피치 시각화 + 팀 패턴 분석)
- 구현 난이도: 중간
- 사용자 가치: 높음
- 기존 코드 재사용: 가능

